name: Slack Webhook Test

on:
  push:
    branches: [ "main" ]

jobs:
  MsgTest:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v3

      - name: console
        run: |
          echo "COLORS=$(echo \#ff3333)" >> $GITHUB_ENV
          echo Failure
        
      - name: slack send
        uses: rtCamp/action-slack-notify@master
        env:
          SLACK_TITLE: Sender
          MSG_MINIMAL: true
          SLACK_COLOR: ${{ env.COLORS }}
          SLACK_MESSAGE: ${{ steps.console.outputs.stdout }}
          SLACK_WEBHOOK: ${{ secrets.CERT_WEBHOOK_URL }}

      - name: console
        run: |
          echo "COLORS=$(echo good)" >> $GITHUB_ENV
          echo Success
          
      - name: slack send
        uses: rtCamp/action-slack-notify@master
        env:
          SLACK_TITLE: Sender
          MSG_MINIMAL: true
          SLACK_COLOR:  ${{ env.COLORS }}
          SLACK_MESSAGE: ${{ steps.console.outputs.stdout }}
          SLACK_WEBHOOK: ${{ secrets.CERT_WEBHOOK_URL }}

      - name: console
        run: |
          echo "COLORS=$(echo \#e6e600)" >> $GITHUB_ENV
          echo Warning
      
      - name: slack send
        uses: rtCamp/action-slack-notify@master
        env:
          SLACK_TITLE: Sender
          MSG_MINIMAL: true
          SLACK_COLOR:  ${{ env.COLORS }}
          SLACK_MESSAGE: ${{ steps.console.outputs.stdout }}
          SLACK_WEBHOOK: ${{ secrets.CERT_WEBHOOK_URL }}
